<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/header :: header-css"></head>
<body>
<div th:replace="fragments/header :: header"></div>

<main role="main" class="container my-5">

  <h2 class="mb-4">My Profile</h2>

  <div class="card p-4">
    <p><strong>Email:</strong> <span th:text="${user.email}"></span></p>
    <p><strong>Name:</strong> <span th:text="${profile != null ? profile.firsName : 'N/A'}"></span>
      <span th:text="${profile != null ? profile.lastName : ''}"></span></p>
    <p><strong>Address:</strong> <span th:text="${profile != null ? profile.address : 'N/A'}"></span></p>
    <p><strong>Phone:</strong> <span th:text="${profile != null ? profile.phoneNumber : 'N/A'}"></span></p>


    <button class="btn btn-outline-dark mt-3" data-toggle="collapse" data-target="#updateForm">
      Update Profile
    </button>


    <div id="updateForm" class="collapse mt-4">
      <form th:action="@{/profile/update}" method="post">
        <div class="form-group">
          <label for="firstName">First name</label>
          <input type="text" class="form-control" id="firstName" name="firstName"
                 th:value="${profile != null ? profile.firsName : ''}">
        </div>
        <div class="form-group">
          <label for="lastName">Last name</label>
          <input type="text" class="form-control" id="lastName" name="lastName"
                 th:value="${profile != null ? profile.lastName : ''}">
        </div>
        <div class="form-group">
          <label for="address">Address</label>
          <input type="text" class="form-control" id="address" name="address"
                 th:value="${profile != null ? profile.address : ''}">
        </div>
        <div class="form-group">
          <label for="phone">Phone number</label>
          <input type="tel" class="form-control" id="phone" name="phone"
                 th:value="${profile != null ? profile.phoneNumber : ''}"
                 required pattern="[0-9]{10}" title="Phone must be 10 digits">
        </div>
        <button type="submit" class="btn btn-dark mt-2">Save Changes</button>
      </form>
    </div>
  </div>

  <div th:if="${param.updated}" class="alert alert-success mt-3">
    âœ… Profile updated successfully!
  </div>

</main>

<div th:replace="fragments/footer :: footer"></div>
</body>
</html>
