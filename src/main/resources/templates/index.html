<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"  xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6">

<head th:replace="fragments/header :: header-css"></head>

<body>
<div th:replace="fragments/header :: header"></div>
<main role="main">
    <section class="py-5">
        <div class="container px-4 px-lg-5 mt-5">

            <div th:if="${param.productAddedToCart}">
                <div class="alert alert-info">Product added to cart!</div>
            </div>

            <h2 class="mb-4">Pizza</h2>
            <div class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center">
                <div th:each="product : ${products}" class="col mb-5"
                     th:if="${product.category.name() == 'PIZZA' and !product.custom}">
                    <div class="card h-100">
                        <div th:if="${product.promoPrice != null}" class="badge bg-dark text-white position-absolute"
                             style="top: 0.5rem; right: 0.5rem">Promo</div>

                        <img class="card-img-top" th:src="${product.mainImageUrl}" alt="..."/>

                        <div class="card-body p-4">
                            <div class="text-center">
                                <h5 class="fw-bolder" th:text="${product.name}"></h5>
                                <p class="text-muted small" th:text="${product.description}"></p>

                                <div th:if="${product.promoPrice != null}">
                                    <span class="text-muted text-decoration-line-through" th:text="${product.price} + ' lei'"></span>
                                    <span th:text="${product.promoPrice} + ' lei'"></span>
                                </div>
                                <div th:if="${product.promoPrice == null}">
                                    <span th:text="${product.price} + ' lei'"></span>
                                </div>
                            </div>
                        </div>

                        <div class="card-footer p-4 pt-0 border-top-0 bg-transparent">
                            <div class="text-center">
                                <a class="btn btn-outline-dark mt-auto"
                                   th:href="${'/shopping-cart-add/' + product.id + '?origin=home'}">Add to cart</a>
                            </div>
                            <div class="text-center" sec:authorize="hasAuthority('ADMIN')">
                                <a class="far fa-edit" th:href="${'/update-product/' + product.id + '?origin=home'}"></a>
                            </div>
                            <div class="text-center" sec:authorize="hasAuthority('ADMIN')">
                                <a class="fas fa-trash" th:href="${'/delete-product/' + product.id + '?origin=home'}"></a>
                            </div>
                        </div>
                    </div>
                </div>

                <div th:if="${#lists.isEmpty(products)}">
                    <span>No products yet!</span>
                </div>
            </div>

            <h2 class="mb-4 mt-5">Drinks</h2>
            <div class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center">
                <div th:each="product : ${products}" class="col mb-5"
                     th:if="${product.category.name() == 'SODA' and !product.custom}">
                    <div class="card h-100">
                        <img class="card-img-top" th:src="${product.mainImageUrl}" alt="..."/>
                        <div class="card-body p-4">
                            <div class="text-center">
                                <h5 class="fw-bolder" th:text="${product.name}"></h5>
                                <p class="text-muted small" th:text="${product.description}"></p>

                                <div th:if="${product.promoPrice != null}">
                                    <span class="text-muted text-decoration-line-through" th:text="${product.price} + ' lei'"></span>
                                    <span th:text="${product.promoPrice} + ' lei'"></span>
                                </div>
                                <div th:if="${product.promoPrice == null}">
                                    <span th:text="${product.price} + ' lei'"></span>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer p-4 pt-0 border-top-0 bg-transparent">
                            <div class="text-center">
                                <a class="btn btn-outline-dark mt-auto"
                                   th:href="${'/shopping-cart-add/' + product.id + '?origin=home'}">Add to cart</a>
                            </div>
                            <div class="text-center" sec:authorize="hasAuthority('ADMIN')">
                                <a class="far fa-edit" th:href="${'/update-product/' + product.id + '?origin=home'}"></a>
                            </div>
                            <div class="text-center" sec:authorize="hasAuthority('ADMIN')">
                                <a class="fas fa-trash" th:href="${'/delete-product/' + product.id + '?origin=home'}"></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div th:if="${#lists.isEmpty(products)}">
                    <span>No drinks yet!</span>
                </div>
            </div>

            <h2 class="mb-4 mt-5">Desserts</h2>
            <div class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center">
                <div th:each="product : ${products}" class="col mb-5"
                     th:if="${product.category == T(org.sda.com.pizzashop.model.enums.ProductCategory).DESSERT and !product.custom}">
                    <div class="card h-100">
                        <img class="card-img-top" th:src="${product.mainImageUrl}" alt="..."/>
                        <div class="card-body p-4">
                            <div class="text-center">
                                <h5 class="fw-bolder" th:text="${product.name}"></h5>
                                <p class="text-muted small" th:text="${product.description}"></p>

                                <div th:if="${product.promoPrice != null}">
                                    <span class="text-muted text-decoration-line-through" th:text="${product.price} + ' lei'"></span>
                                    <span th:text="${product.promoPrice} + ' lei'"></span>
                                </div>
                                <div th:if="${product.promoPrice == null}">
                                    <span th:text="${product.price} + ' lei'"></span>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer p-4 pt-0 border-top-0 bg-transparent">
                            <div class="text-center">
                                <a class="btn btn-outline-dark mt-auto"
                                   th:href="${'/shopping-cart-add/' + product.id + '?origin=home'}">Add to cart</a>
                            </div>
                            <div class="text-center" sec:authorize="hasAuthority('ADMIN')">
                                <a class="far fa-edit" th:href="${'/update-product/' + product.id + '?origin=home'}"></a>
                            </div>
                            <div class="text-center" sec:authorize="hasAuthority('ADMIN')">
                                <a class="fas fa-trash" th:href="${'/delete-product/' + product.id + '?origin=home'}"></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </section>
</main>
<div th:replace="fragments/footer :: footer"></div>
</body>
</html>
